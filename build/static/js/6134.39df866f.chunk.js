"use strict";(self.webpackChunkwoodvale=self.webpackChunkwoodvale||[]).push([[6134,8821],{8821:function(e,t,s){s.r(t),s.d(t,{action:function(){return u}});var n=s(4165),a=s(5861),r=s(2791),i=s(7689),l=s(1087),o=s(2620),d=s(8127),c=s(184);function u(e){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,n.Z)().mark((function e(t){var s,a,r,i,l,c,u,m,g,x,p,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.request,a=t.params,r=s.method,e.next=4,s.formData();case 4:if(i=e.sent,l=(0,d.getAuthToken)(),c=a.id,u={leave_date:i.get("leave_date"),return_date:i.get("return_date"),person_responsible:i.get("person_responsible"),relationship:i.get("relationship"),contact:i.get("contact"),reason:i.get("reason"),resident_id:c},m={leave_date:i.get("leave_date"),return_date:i.get("return_date"),person_responsible:i.get("person_responsible"),relationship:i.get("relationship"),contact:i.get("contact"),reason:i.get("reason")},g="https://woodvale-test-2.onrender.com/leave-records","POST"!==r){e.next=21;break}return e.next=13,fetch(g,{method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer "+l,"Access-Control-Allow-Origin":"*"},body:JSON.stringify(u)});case 13:if(400!==(x=e.sent).status){e.next=16;break}return e.abrupt("return",x);case 16:if(x.ok){e.next=18;break}throw(0,o.AV)({message:"Failed to save the leave"},{status:500});case 18:case 30:return e.abrupt("return",(0,o.uX)("/login/residents/".concat(c,"/leaves")));case 21:return p=a.leaveId,g="/leave-records/".concat(p),e.next=25,fetch(g,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l,"Access-Control-Allow-Origin":"*"},body:JSON.stringify(m)});case 25:if(400!==(h=e.sent).status){e.next=28;break}return e.abrupt("return",h);case 28:if(h.ok){e.next=30;break}throw(0,o.AV)({message:"Failed to update the leave"},{status:500});case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=function(e){var t=e.method,s=e.leave,n=(0,i.s0)(),a=(0,i.HJ)(),o=(0,i.nA)(),d="submitting"===a.state;return(0,c.jsxs)(r.Fragment,{children:[o&&o.errors&&(0,c.jsx)("ul",{children:Object.values(o.errors).map((function(e){return(0,c.jsx)("li",{children:e},e)}))}),o&&o.message&&(0,c.jsx)("p",{children:o.message}),(0,c.jsxs)(l.l0,{method:t,children:[(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium leading-6 text-gray-900",children:"Leave Date"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"date",name:"leave_date",id:"leave_date",defaultValue:s?s.leave_date:"",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium leading-6 text-gray-900",children:"Return Date"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"date",name:"return_date",id:"return_date",defaultValue:s?s.return_date:"",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"Name of Person Responsible"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"person_responsible",id:"person_responsible",defaultValue:s?s.person_responsible:"",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"Relationship to Resident"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"relationship",id:"relationship",defaultValue:s?s.relationship:"",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"Contact of the Person Responsible"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{name:"contact",id:"contact",defaultValue:s?s.contact:"",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"col-span-full",children:[(0,c.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"Reason for the Leave."}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("textarea",{id:"reason",name:"reason",required:!0,rows:3,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",defaultValue:s?s.reason:""})}),(0,c.jsx)("p",{className:"mt-3 text-sm leading-6 text-gray-600",children:"Describe the reason."})]}),(0,c.jsxs)("div",{className:"flex justify-between py-5 sm:col-span-4",children:[(0,c.jsx)("button",{onClick:function(){n("..")},className:"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Back"}),(0,c.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:d?"Submitting...":"Save"})]})]})]})}},6134:function(e,t,s){s.r(t);var n=s(2791),a=s(8821),r=s(184);t.default=function(){return(0,r.jsx)(n.Fragment,{children:(0,r.jsx)(a.default,{method:"post"})})}}}]);
//# sourceMappingURL=6134.39df866f.chunk.js.map