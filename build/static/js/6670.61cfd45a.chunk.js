"use strict";(self.webpackChunkwoodvale=self.webpackChunkwoodvale||[]).push([[6670],{6670:function(e,t,r){r.r(t),r.d(t,{default:function(){return v},loader:function(){return j}});var n=r(4165),a=r(5861),s=r(2791),i=r(7689),o=r(2620),c=r(8127),l=r(9439),d=r(5987),u=["title","titleId"];var h=s.forwardRef((function(e,t){var r=e.title,n=e.titleId,a=(0,d.Z)(e,u);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))})),f=r(3158),x=r(7929),m=r(1087),p=r(184);var w=function(e){var t=e.attachments,r=(0,s.useState)(t),i=(0,l.Z)(r,2),d=(i[0],i[1]);function u(){return(u=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,s,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.confirm("Are you sure?"),s=(0,c.getAuthToken)(),!a){e.next=10;break}return e.next=5,fetch("https://homes-test.onrender.com/resident/upload/".concat(t,"/").concat(r),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}});case 5:if((i=e.sent).ok&&d((function(e){return e.filter((function(e){return e.id!==r}))})),i.ok){e.next=9;break}throw(0,o.AV)({message:"Could not delete attachment."},{status:500});case 9:return e.abrupt("return",(0,o.uX)("/login/residents/".concat(t,"/attachment")));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,s.useEffect)((function(){d(t)}),[t]);var w=(0,s.useState)(1),v=(0,l.Z)(w,2),j=v[0],g=v[1],b=t.length,k=Math.ceil(b/10),N=10*(j-1),y=N+10;return t.slice(N,y),(0,p.jsxs)(s.Fragment,{children:[(0,p.jsxs)(x.iA,{className:"mt-6 table w-full",children:[(0,p.jsx)(x.ss,{children:(0,p.jsxs)(x.SC,{children:[(0,p.jsx)(x.xs,{className:"",children:"Upload Date"}),(0,p.jsx)(x.xs,{className:" text-left",children:"Attachment"}),(0,p.jsx)(x.xs,{className:" text-left",children:"Download"}),(0,p.jsx)(x.xs,{className:" text-left",children:"Delete"})]})}),(0,p.jsx)(x.RM,{children:t.map((function(e){return(0,p.jsxs)(x.SC,{className:"hover:bg-white",children:[(0,p.jsx)(x.pj,{className:" hover:text-indigo-600 hover:underline",children:(0,p.jsx)(m.rU,{to:"./".concat(e.id),children:e.upload_date})}),(0,p.jsx)(x.pj,{className:" text-left",children:e.description}),(0,p.jsx)(x.pj,{className:" text-left",children:(0,p.jsxs)("div",{onClick:function(){return function(e,t,r){var n=(0,c.getAuthToken)();fetch("https://homes-test.onrender.com/resident/upload/".concat(e,"/").concat(t),{headers:{Authorization:"Bearer "+n}}).then((function(e){if(e.ok)return e.blob();404===e.status&&window.alert("This attachment is blank")})).then((function(e){var t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),n=document.createElement("a");n.href=t,n.setAttribute("download","attachment_".concat(r)),document.body.appendChild(n),n.click(),n.parentNode.removeChild(n)})).catch((function(e){console.error("Error downloading attachment:",e.message)}))}(e.resident_id,e.id,e.description)},className:"flex space-x-1 cursor-pointer hover:text-indigo-600 hover:underline",children:[(0,p.jsx)(h,{className:"h-4 "}),(0,p.jsxs)(x.xv,{children:["Download ",e.description]})]})}),(0,p.jsxs)("div",{onClick:function(){return function(e,t){return u.apply(this,arguments)}(e.resident_id,e.id)},className:"flex space-x-2 hover:underline hover:text-indigo-600 cursor-pointer",children:[(0,p.jsx)(f.Z,{className:"h-4 "}),(0,p.jsxs)(x.xv,{children:["Delete ",e.description]})]}),(0,p.jsx)(x.pj,{})]},e.id)}))})]}),(0,p.jsxs)("ol",{className:"flex justify-center gap-1 text-xs font-medium mt-4",children:[j>1&&(0,p.jsx)("li",{children:(0,p.jsxs)("a",{href:"#",onClick:function(){return g((function(e){return e-1}))},className:"inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180",children:[(0,p.jsx)("span",{className:"sr-only",children:"Prev Page"}),(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,p.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]})}),Array.from({length:k},(function(e,t){return t+1})).map((function(e){return(0,p.jsx)("li",{children:(0,p.jsx)("a",{href:"#",onClick:function(){return g(e)},className:"".concat(e===j?"block h-8 w-8 rounded border-blue-600 bg-indigo-600 text-center leading-8 text-white":"block h-8 w-8 rounded border border-gray-100 bg-white text-center leading-8 text-gray-900"),children:e})},e)})),j<k&&(0,p.jsx)("li",{children:(0,p.jsxs)("a",{href:"#",onClick:function(){return g((function(e){return e+1}))},className:"inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180",children:[(0,p.jsx)("span",{className:"sr-only",children:"Next Page"}),(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,p.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})})]})]})};var v=function(){var e=(0,i.V4)("attachments");return(0,p.jsx)(w,{attachments:e})};function j(e){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,i,l,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.request,r=t.params,a=r.id,s="https://woodvale-test-2.onrender.com/resident/upload/"+a,i=(0,c.getAuthToken)(),e.next=6,fetch(s,{method:"get",headers:{Authorization:"Bearer "+i,"Access-Control-Allow-Origin":"*"}});case 6:if(404!==(l=e.sent).status){e.next=9;break}return e.abrupt("return",l);case 9:if(400!==l.status){e.next=11;break}return e.abrupt("return",l);case 11:if(l.ok){e.next=13;break}throw(0,o.AV)({message:"Server error"},{status:500});case 13:return e.next=15,l.json();case 15:return d=e.sent,e.abrupt("return",d);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},3158:function(e,t,r){var n=r(5987),a=r(2791),s=["title","titleId"];var i=a.forwardRef((function(e,t){var r=e.title,i=e.titleId,o=(0,n.Z)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":i},o),r?a.createElement("title",{id:i},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}));t.Z=i}}]);
//# sourceMappingURL=6670.61cfd45a.chunk.js.map