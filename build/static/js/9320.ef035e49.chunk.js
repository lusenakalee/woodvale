"use strict";(self.webpackChunkwoodvale=self.webpackChunkwoodvale||[]).push([[9320,6670],{6670:function(e,t,r){r.r(t),r.d(t,{default:function(){return w},loader:function(){return v}});var n=r(4165),a=r(5861),s=r(2791),i=r(7689),l=r(2620),o=r(8127),c=r(9439),d=r(5987),u=["title","titleId"];var h=s.forwardRef((function(e,t){var r=e.title,n=e.titleId,a=(0,d.Z)(e,u);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))})),x=r(3158),m=r(7929),f=r(1087),p=r(184);var g=function(e){var t=e.attachments,r=(0,s.useState)(t),i=(0,c.Z)(r,2),d=(i[0],i[1]);function u(){return(u=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,s,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.confirm("Are you sure?"),s=(0,o.getAuthToken)(),!a){e.next=10;break}return e.next=5,fetch("https://homes-test.onrender.com/resident/upload/".concat(t,"/").concat(r),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}});case 5:if((i=e.sent).ok&&d((function(e){return e.filter((function(e){return e.id!==r}))})),i.ok){e.next=9;break}throw(0,l.AV)({message:"Could not delete attachment."},{status:500});case 9:return e.abrupt("return",(0,l.uX)("/login/residents/".concat(t,"/attachment")));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,s.useEffect)((function(){d(t)}),[t]);var g=(0,s.useState)(1),w=(0,c.Z)(g,2),v=w[0],j=w[1],b=t.length,k=Math.ceil(b/10),y=10*(v-1),N=y+10;return t.slice(y,N),(0,p.jsxs)(s.Fragment,{children:[(0,p.jsxs)(m.iA,{className:"mt-6 table w-full",children:[(0,p.jsx)(m.ss,{children:(0,p.jsxs)(m.SC,{children:[(0,p.jsx)(m.xs,{className:"",children:"Upload Date"}),(0,p.jsx)(m.xs,{className:" text-left",children:"Attachment"}),(0,p.jsx)(m.xs,{className:" text-left",children:"Download"}),(0,p.jsx)(m.xs,{className:" text-left",children:"Delete"})]})}),(0,p.jsx)(m.RM,{children:t.map((function(e){return(0,p.jsxs)(m.SC,{className:"hover:bg-white",children:[(0,p.jsx)(m.pj,{className:" hover:text-indigo-600 hover:underline",children:(0,p.jsx)(f.rU,{to:"./".concat(e.id),children:e.upload_date})}),(0,p.jsx)(m.pj,{className:" text-left",children:e.description}),(0,p.jsx)(m.pj,{className:" text-left",children:(0,p.jsxs)("div",{onClick:function(){return function(e,t,r){var n=(0,o.getAuthToken)();fetch("https://homes-test.onrender.com/resident/upload/".concat(e,"/").concat(t),{headers:{Authorization:"Bearer "+n}}).then((function(e){if(e.ok)return e.blob();404===e.status&&window.alert("This attachment is blank")})).then((function(e){var t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),n=document.createElement("a");n.href=t,n.setAttribute("download","attachment_".concat(r)),document.body.appendChild(n),n.click(),n.parentNode.removeChild(n)})).catch((function(e){console.error("Error downloading attachment:",e.message)}))}(e.resident_id,e.id,e.description)},className:"flex space-x-1 cursor-pointer hover:text-indigo-600 hover:underline",children:[(0,p.jsx)(h,{className:"h-4 "}),(0,p.jsxs)(m.xv,{children:["Download ",e.description]})]})}),(0,p.jsxs)("div",{onClick:function(){return function(e,t){return u.apply(this,arguments)}(e.resident_id,e.id)},className:"flex space-x-2 hover:underline hover:text-indigo-600 cursor-pointer",children:[(0,p.jsx)(x.Z,{className:"h-4 "}),(0,p.jsxs)(m.xv,{children:["Delete ",e.description]})]}),(0,p.jsx)(m.pj,{})]},e.id)}))})]}),(0,p.jsxs)("ol",{className:"flex justify-center gap-1 text-xs font-medium mt-4",children:[v>1&&(0,p.jsx)("li",{children:(0,p.jsxs)("a",{href:"#",onClick:function(){return j((function(e){return e-1}))},className:"inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180",children:[(0,p.jsx)("span",{className:"sr-only",children:"Prev Page"}),(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,p.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]})}),Array.from({length:k},(function(e,t){return t+1})).map((function(e){return(0,p.jsx)("li",{children:(0,p.jsx)("a",{href:"#",onClick:function(){return j(e)},className:"".concat(e===v?"block h-8 w-8 rounded border-blue-600 bg-indigo-600 text-center leading-8 text-white":"block h-8 w-8 rounded border border-gray-100 bg-white text-center leading-8 text-gray-900"),children:e})},e)})),v<k&&(0,p.jsx)("li",{children:(0,p.jsxs)("a",{href:"#",onClick:function(){return j((function(e){return e+1}))},className:"inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180",children:[(0,p.jsx)("span",{className:"sr-only",children:"Next Page"}),(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,p.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})})]})]})};var w=function(){var e=(0,i.V4)("attachments");return(0,p.jsx)(g,{attachments:e})};function v(e){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,i,c,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.request,r=t.params,a=r.id,s="https://woodvale-test-2.onrender.com/resident/upload/"+a,i=(0,o.getAuthToken)(),e.next=6,fetch(s,{method:"get",headers:{Authorization:"Bearer "+i,"Access-Control-Allow-Origin":"*"}});case 6:if(404!==(c=e.sent).status){e.next=9;break}return e.abrupt("return",c);case 9:if(400!==c.status){e.next=11;break}return e.abrupt("return",c);case 11:if(c.ok){e.next=13;break}throw(0,l.AV)({message:"Server error"},{status:500});case 13:return e.next=15,c.json();case 15:return d=e.sent,e.abrupt("return",d);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},9320:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var n=r(2791),a=r(1087),s=r(7810),i=r(5022),l=r(8252),o=r(184);var c=function(){return(0,o.jsx)(n.Fragment,{children:(0,o.jsx)("header",{className:"",children:(0,o.jsxs)("div",{className:"mx-auto max-w-7xl flex space-x-6 px-4 py-6 sm:px-6 lg:px-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold  pr-10 tracking-tight text-gray-900",children:"Attachments"}),(0,o.jsxs)("div",{className:"flex space-x-6",children:[(0,o.jsx)(a.OL,{to:"..",children:(0,o.jsxs)("button",{type:"button",className:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:[(0,o.jsx)(s.Z,{className:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Back to Resident"]})}),(0,o.jsx)(a.OL,{to:".",children:(0,o.jsxs)("button",{type:"button",className:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:[(0,o.jsx)(i.Z,{className:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),"View Attachments"]})}),(0,o.jsx)(a.OL,{to:"./new",children:(0,o.jsxs)("button",{type:"button",className:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:[(0,o.jsx)(l.Z,{className:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Add Attachment"]})})]})]})})})},d=r(7689),u=r(6670);var h=function(){return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(c,{}),(0,o.jsx)("main",{children:(0,o.jsxs)("div",{className:"mx-auto max-w-7xl py-6 sm:px-6 lg:px-8",children:[(0,o.jsx)(d.j3,{}),(0,o.jsx)(u.default,{})]})})]})}},7810:function(e,t,r){var n=r(5987),a=r(2791),s=["title","titleId"];var i=a.forwardRef((function(e,t){var r=e.title,i=e.titleId,l=(0,n.Z)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":i},l),r?a.createElement("title",{id:i},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}));t.Z=i},5022:function(e,t,r){var n=r(5987),a=r(2791),s=["title","titleId"];var i=a.forwardRef((function(e,t){var r=e.title,i=e.titleId,l=(0,n.Z)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":i},l),r?a.createElement("title",{id:i},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"}))}));t.Z=i},3158:function(e,t,r){var n=r(5987),a=r(2791),s=["title","titleId"];var i=a.forwardRef((function(e,t){var r=e.title,i=e.titleId,l=(0,n.Z)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":i},l),r?a.createElement("title",{id:i},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}));t.Z=i}}]);
//# sourceMappingURL=9320.ef035e49.chunk.js.map