{"version":3,"file":"static/js/9920.621065ae.chunk.js","mappings":"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","sources":["components/IncidentComps/ViewAllIncidents.js","pages/IncidentPages/AllIncidentsPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useSubmit } from \"react-router-dom\";\r\nimport {\r\n  InformationCircleIcon,\r\n  PrinterIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  Icon,\r\n  Table,\r\n  TableRow,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeaderCell,\r\n  TableBody,\r\n  Title,\r\n  Flex,\r\n  Select,\r\n  SelectItem,\r\n  MultiSelect,\r\n  MultiSelectItem,\r\n} from \"@tremor/react\";\r\n\r\nfunction ViewAllIncidents({ incidents }) {\r\n  const submit = useSubmit();\r\n  function startDeleteHandler() {\r\n    const proceed = window.confirm(\"Are you sure?\");\r\n\r\n    if (proceed) {\r\n      submit(null, { method: \"delete\" });\r\n    }\r\n  }\r\n\r\n\r\n      // Calculate pagination\r\n      const [currentPage, setCurrentPage] = useState(1); // Current page number\r\n\r\n      const INCIDENTS_PER_PAGE = 10; // Set the number of residents to display per page\r\n      const totalIncidents = incidents.length;\r\n      const totalPages = Math.ceil(totalIncidents/ INCIDENTS_PER_PAGE);\r\n    \r\n      // Get the slice of residents to display based on the current page\r\n      const startIndex = (currentPage - 1) * INCIDENTS_PER_PAGE;\r\n      const endIndex = startIndex + INCIDENTS_PER_PAGE;\r\n      const incidentsToShow = incidents.slice(startIndex, endIndex);\r\n\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div>\r\n        <Flex\r\n          className=\"space-x-0.5\"\r\n          justifyContent=\"start\"\r\n          alignItems=\"center\"\r\n        >\r\n          <Title>Incidents</Title>\r\n          <Icon\r\n            icon={InformationCircleIcon}\r\n            variant=\"simple\"\r\n            tooltip=\"Shows incidents\"\r\n          />\r\n        </Flex>\r\n      </div>\r\n      <Table className=\"mt-6\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableHeaderCell>Resident Name</TableHeaderCell>\r\n            <TableHeaderCell>Incident Date</TableHeaderCell>\r\n            <TableHeaderCell className=\"text-right\">\r\n              Person Reporting\r\n            </TableHeaderCell>\r\n            <TableHeaderCell className=\"text-right\">\r\n              Person notified\r\n            </TableHeaderCell>\r\n            <TableHeaderCell className=\"text-right\">location</TableHeaderCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {incidentsToShow.map((item) => (\r\n            <TableRow key={item.id}>\r\n              <Link to={`/login/residents/${item.resident_id}/incident/${item.id}`}>\r\n                <TableCell>{item.resident.first_name} {item.resident.last_name}</TableCell>\r\n              </Link>\r\n              <TableCell className=\"text-right\">\r\n                {item.incident_date}\r\n              </TableCell>\r\n              <TableCell className=\"text-right\">\r\n                {item.person_reporting}\r\n              </TableCell>\r\n              <TableCell className=\"text-right\">\r\n                {item.person_notified}\r\n              </TableCell>\r\n              <TableCell className=\"text-right\">{item.location}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n\r\n\r\n       {/* Pagination */}\r\n       <ol className=\"flex justify-center gap-1 text-xs font-medium mt-4\">\r\n        {currentPage > 1 && (\r\n          <li>\r\n            <a\r\n              href=\"#\"\r\n              onClick={() => setCurrentPage((prev) => prev - 1)}\r\n              className=\"inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180\"\r\n            >\r\n              <span className=\"sr-only\">Prev Page</span>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                className=\"h-3 w-3\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path\r\n                  fillRule=\"evenodd\"\r\n                  d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\"\r\n                  clipRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n            </a>\r\n          </li>\r\n        )}\r\n\r\n        {Array.from({ length: totalPages }, (_, index) => index + 1).map(\r\n          (pageNum) => (\r\n            <li key={pageNum}>\r\n              <a\r\n                href=\"#\"\r\n                onClick={() => setCurrentPage(pageNum)}\r\n                className={`${\r\n                  pageNum === currentPage\r\n                    ? \"block h-8 w-8 rounded border-blue-600 bg-indigo-600 text-center leading-8 text-white\"\r\n                    : \"block h-8 w-8 rounded border border-gray-100 bg-white text-center leading-8 text-gray-900\"\r\n                }`}\r\n              >\r\n                {pageNum}\r\n              </a>\r\n            </li>\r\n          )\r\n        )}\r\n\r\n        {currentPage < totalPages && (\r\n          <li>\r\n            <a\r\n              href=\"#\"\r\n              onClick={() => setCurrentPage((prev) => prev + 1)}\r\n              className=\"inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180\"\r\n            >\r\n              <span className=\"sr-only\">Next Page</span>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                className=\"h-3 w-3\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path\r\n                  fillRule=\"evenodd\"\r\n                  d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\r\n                  clipRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n            </a>\r\n          </li>\r\n        )}\r\n      </ol>\r\n\r\n      \r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ViewAllIncidents;\r\n","import React from 'react'\r\nimport ViewAllIncidents from '../../components/IncidentComps/ViewAllIncidents'\r\nimport { json, useLoaderData } from 'react-router-dom'\r\nimport { getAuthToken } from '../../util/Auth'\r\n\r\nfunction AllIncidentsPage() {\r\n    const incidents = useLoaderData()\r\n  return (\r\n    <main>\r\n    <div className=\"mx-auto max-w-7xl py-6 sm:px-6 lg:px-8\">\r\n    <ViewAllIncidents incidents={incidents} />\r\n    </div></main>\r\n  )\r\n}\r\n\r\nexport default AllIncidentsPage\r\n\r\nexport async function loader({ request, params }) {\r\n    let url = \"https://homes-test.onrender.com/incident-reports\";\r\n    const token = getAuthToken();\r\n  \r\n    const response = await fetch(url, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n    });\r\n    if (response.status === 404) {\r\n      return response;\r\n    }\r\n    if (response.status === 400) {\r\n      return response;\r\n    }\r\n    if (!response.ok) {\r\n      throw json({ message: \"Server error\" }, { status: 500 });\r\n    }\r\n  \r\n    const resData = await response.json();\r\n    ;\r\n    return resData;\r\n  }"],"names":["_ref","incidents","useSubmit","_useState","useState","_useState2","_slicedToArray","currentPage","setCurrentPage","totalIncidents","length","totalPages","Math","ceil","startIndex","endIndex","incidentsToShow","slice","_jsxs","React","children","_jsx","Flex","className","justifyContent","alignItems","Title","Icon","icon","InformationCircleIcon","variant","tooltip","Table","TableHead","TableRow","TableHeaderCell","TableBody","map","item","Link","to","concat","resident_id","id","TableCell","resident","first_name","last_name","incident_date","person_reporting","person_notified","location","href","onClick","prev","xmlns","viewBox","fill","fillRule","d","clipRule","Array","from","_","index","pageNum","useLoaderData","ViewAllIncidents","loader","_x","_loader","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","response","resData","wrap","_context","next","request","params","getAuthToken","fetch","method","headers","Authorization","sent","status","abrupt","ok","json","message","stop"],"sourceRoot":""}