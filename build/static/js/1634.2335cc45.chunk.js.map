{"version":3,"file":"static/js/1634.2335cc45.chunk.js","mappings":"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","sources":["components/IncidentComps/NewIncidentForm.js","pages/IncidentPages/NewIncidentsPage.js"],"sourcesContent":["import React from \"react\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\nimport {\r\n  Form,\r\n  json,\r\n  redirect,\r\n  useActionData,\r\n  useNavigate,\r\n  useNavigation,\r\n} from \"react-router-dom\";\r\n\r\nfunction NewIncidentForm({ method, incident }) {\r\n  const navigate = useNavigate();\r\n  const navigation = useNavigation();\r\n  const data = useActionData();\r\n  const isSubmitting = navigation.state === \"submitting\";\r\n  function cancelHandler() {\r\n    navigate(\"..\");\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data && data.errors && (\r\n        <ul>\r\n          {Object.values(data.errors).map((err) => (\r\n            <li key={err}>{err}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {data && data.message && <p>{data.message}</p>}\r\n      <Form method={method}>\r\n        <div className=\"sm:col-span-3\">\r\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n            Incident Date\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <input\r\n              id=\"incident_date\"\r\n              name=\"incident_date\"\r\n              type=\"date\"\r\n              defaultValue={incident ? incident.incident_date : \"\"}\r\n              required\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-span-full\">\r\n          <label\r\n            htmlFor=\"about\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Incident description\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <textarea\r\n              id=\"about\"\r\n              name=\"description\"\r\n              required\r\n              rows={3}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n              defaultValue={incident ? incident.description : \"\"}\r\n            />\r\n          </div>\r\n          <p className=\"mt-3 text-sm leading-6 text-gray-600\">\r\n            Write a few sentences about the Incident.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"col-span-full\">\r\n          <label\r\n            htmlFor=\"actions_taken\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Actions Taken\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <textarea\r\n              id=\"actions_taken\"\r\n              name=\"actions_taken\"\r\n              required\r\n              rows={3}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n              defaultValue={incident ? incident.actions_taken : \"\"}\r\n            />\r\n          </div>\r\n          <p className=\"mt-3 text-sm leading-6 text-gray-600\">\r\n            Write a few sentences about the Incident.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"sm:col-span-3\">\r\n          <label\r\n            htmlFor=\"location\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Location of Incident\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"location\"\r\n              defaultValue={incident ? incident.location : \"\"}\r\n              id=\"location\"\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"sm:col-span-3\">\r\n          <label\r\n            htmlFor=\"person_reporting\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Person reporting\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <input\r\n              required\r\n              type=\"text\"\r\n              name=\"person_reporting\"\r\n              defaultValue={incident ? incident.person_reporting : \"\"}\r\n              id=\"person_reporting\"\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"sm:col-span-3\">\r\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n            Person notified\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <select\r\n              id=\"person_notified\"\r\n              defaultValue={incident ? incident.person_notified : \"\"}\r\n              name=\"person_notified\"\r\n              autoComplete=\"person_notified\"\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6\"\r\n            >\r\n              <option>911</option>\r\n              <option>Case Manager</option>\r\n              <option>MD</option>\r\n              <option>Family</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-span-full\">\r\n          <label\r\n            htmlFor=\"witnesses\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Witnesses\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <textarea\r\n              id=\"witnesses\"\r\n              name=\"witnesses\"\r\n              required\r\n              rows={3}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n              defaultValue={incident ? incident.witnesses : \"\"}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-span-full\">\r\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n            Antecedent\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <textarea\r\n              id=\"antecedent\"\r\n              name=\"antecedent\"\r\n              rows={3}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n              defaultValue={incident ? incident.antecedent : \"\"}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between py-5 sm:col-span-4\">\r\n          <button\r\n            onClick={cancelHandler}\r\n            className=\"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            Back\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n            className=\"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            {isSubmitting ? \"Submitting...\" : \"Save\"}\r\n          </button>\r\n        </div>\r\n      </Form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default NewIncidentForm;\r\nexport async function action({ request, params }) {\r\n  const method = request.method;\r\n  const data = await request.formData();\r\n  const token = getAuthToken();\r\n  const id = params.id;\r\n  const incidentId = params.incidentId;\r\n  const incidentData = {\r\n    incident_date: data.get(\"incident_date\"),\r\n    description: data.get(\"description\"),\r\n    actions_taken: data.get(\"actions_taken\"),\r\n    location: data.get(\"location\"),\r\n    person_reporting: data.get(\"person_reporting\"),\r\n    person_notified: data.get(\"person_notified\"),\r\n    witnesses: data.get(\"witnesses\"),\r\n    antecedent: data.get(\"antecedent\"),\r\n    resident_id: id,\r\n  };\r\n  const incidentUpdateData = {\r\n    incident_date: data.get(\"incident_date\"),\r\n    description: data.get(\"description\"),\r\n    actions_taken: data.get(\"actions_taken\"),\r\n    location: data.get(\"location\"),\r\n    person_reporting: data.get(\"person_reporting\"),\r\n    person_notified: data.get(\"person_notified\"),\r\n    witnesses: data.get(\"witnesses\"),\r\n    antecedent: data.get(\"antecedent\"),\r\n  }\r\n  let url = \"https://homes-test.onrender.com/incident-reports\";\r\n  if (method === \"POST\") {\r\n    const response = await fetch(url, {\r\n      method: method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      body: JSON.stringify(incidentData),\r\n    });\r\n    if (response.status === 400) {\r\n      return response;\r\n    }\r\n    if (!response.ok) {\r\n      throw json({ message: \"Failed to save the incident\" }, { status: 500 });\r\n    }\r\n    return redirect(`/login/residents/${id}/incident`);\r\n  }else{\r\n    url = `/incident-reports/${incidentId}`;\r\n    const response = await fetch(url, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      body: JSON.stringify(incidentUpdateData),\r\n    });\r\n    if (response.status === 400) {\r\n      return response;\r\n    }\r\n    if (!response.ok) {\r\n      throw json({ message: \"Failed to update the incident\" }, { status: 500 });\r\n    }\r\n    return redirect(`/login/residents/${id}/incident`);\r\n  }\r\n}\r\n","import React from 'react'\r\nimport NewIncidentForm from '../../components/IncidentComps/NewIncidentForm'\r\n\r\nfunction NewIncidentsPage() {\r\n  return (\r\n    <React.Fragment>\r\n        <NewIncidentForm method=\"post\"/>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default NewIncidentsPage"],"names":["action","_x","_action","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref2","request","params","method","data","token","id","incidentId","incidentData","incidentUpdateData","url","response","_response","wrap","_context","prev","next","formData","sent","getAuthToken","incident_date","get","description","actions_taken","location","person_reporting","person_notified","witnesses","antecedent","resident_id","fetch","headers","Authorization","body","JSON","stringify","status","abrupt","ok","json","message","redirect","concat","stop","_ref","incident","navigate","useNavigate","navigation","useNavigation","useActionData","isSubmitting","state","_jsxs","React","children","errors","_jsx","Object","values","map","err","Form","className","name","type","defaultValue","required","htmlFor","rows","autoComplete","onClick","disabled","NewIncidentForm"],"sourceRoot":""}