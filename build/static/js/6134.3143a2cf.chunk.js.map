{"version":3,"file":"static/js/6134.3143a2cf.chunk.js","mappings":"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","sources":["components/LeaveComps/NewLeaveForm.js","pages/LeavePages/NewLeavesPage.js"],"sourcesContent":["import React from \"react\";\r\nimport {\r\n  Form,\r\n  json,\r\n  redirect,\r\n  useActionData,\r\n  useNavigate,\r\n  useNavigation,\r\n} from \"react-router-dom\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\n\r\nfunction NewLeaveForm({ method, leave }) {\r\n  const navigate = useNavigate();\r\n  const navigation = useNavigation();\r\n  const data = useActionData();\r\n  const isSubmitting = navigation.state === \"submitting\";\r\n  function cancelHandler() {\r\n    navigate(\"..\");\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data && data.errors && (\r\n        <ul>\r\n          {Object.values(data.errors).map((err) => (\r\n            <li key={err}>{err}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {data && data.message && <p>{data.message}</p>}\r\n      <Form method={method}>\r\n        <div className=\"sm:col-span-3\">\r\n          <label\r\n            htmlFor=\"date\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Leave Date\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <input\r\n              type=\"date\"\r\n              name=\"leave_date\"\r\n              id=\"leave_date\"\r\n              defaultValue={leave ? leave.leave_date : \"\"}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"sm:col-span-3\">\r\n          <label\r\n            htmlFor=\"date\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Return Date\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <input\r\n              type=\"date\"\r\n              name=\"return_date\"\r\n              id=\"return_date\"\r\n              defaultValue={leave ? leave.return_date : \"\"}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"sm:col-span-3\">\r\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n            Name of Person Responsible\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"person_responsible\"\r\n              id=\"person_responsible\"\r\n              defaultValue={leave ? leave.person_responsible : \"\"}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"sm:col-span-3\">\r\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n            Relationship to Resident\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"relationship\"\r\n              id=\"relationship\"\r\n              defaultValue={leave ? leave.relationship : \"\"}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"sm:col-span-3\">\r\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n            Contact of the Person Responsible\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <input\r\n              name=\"contact\"\r\n              id=\"contact\"\r\n              defaultValue={leave ? leave.contact : \"\"}\r\n              required\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-span-full\">\r\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n            Reason for the Leave.\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <textarea\r\n              id=\"reason\"\r\n              name=\"reason\"\r\n              required\r\n              rows={3}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n              defaultValue={leave ? leave.reason : \"\"}\r\n            />\r\n          </div>\r\n          <p className=\"mt-3 text-sm leading-6 text-gray-600\">\r\n            Describe the reason.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between py-5 sm:col-span-4\">\r\n          <button\r\n            onClick={cancelHandler}\r\n            className=\"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            Back\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n            className=\"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            {isSubmitting ? \"Submitting...\" : \"Save\"}\r\n          </button>\r\n        </div>\r\n      </Form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default NewLeaveForm;\r\n\r\nexport async function action({ request, params }) {\r\n  const method = request.method;\r\n  const data = await request.formData();\r\n  const token = getAuthToken();\r\n  const id = params.id;\r\n  const leaveData = {\r\n    leave_date: data.get(\"leave_date\"),\r\n    return_date: data.get(\"return_date\"),\r\n    person_responsible: data.get(\"person_responsible\"),\r\n    relationship: data.get(\"relationship\"),\r\n    contact: data.get(\"contact\"),\r\n    reason: data.get(\"reason\"),\r\n    resident_id: id,\r\n  };\r\n  const leaveUpdateData = {\r\n    leave_date: data.get(\"leave_date\"),\r\n    return_date: data.get(\"return_date\"),\r\n    person_responsible: data.get(\"person_responsible\"),\r\n    relationship: data.get(\"relationship\"),\r\n    contact: data.get(\"contact\"),\r\n    reason: data.get(\"reason\"),\r\n  };\r\n  let url = \"https://homes-test.onrender.com/leave-records\";\r\n  if (method === \"POST\") {\r\n    const response = await fetch(url, {\r\n      method: method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      body: JSON.stringify(leaveData),\r\n    });\r\n    if (response.status === 400) {\r\n      return response;\r\n    }\r\n    if (!response.ok) {\r\n      throw json({ message: \"Failed to save the leave\" }, { status: 500 });\r\n    }\r\n    return redirect(`/login/residents/${id}/leaves`);\r\n  } else {\r\n    const leaveId = params.leaveId;\r\n    url = `/leave-records/${leaveId}`;\r\n    const response = await fetch(url, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      body: JSON.stringify(leaveUpdateData),\r\n    });\r\n    if (response.status === 400) {\r\n      return response;\r\n    }\r\n    if (!response.ok) {\r\n      throw json({ message: \"Failed to update the leave\" }, { status: 500 });\r\n    }\r\n    return redirect(`/login/residents/${id}/leaves`);\r\n  }\r\n}\r\n","import React from 'react'\r\nimport NewLeaveForm from '../../components/LeaveComps/NewLeaveForm'\r\n\r\nfunction NewLeavesPage() {\r\n  return (\r\n    <React.Fragment>\r\n        <NewLeaveForm method=\"post\"/>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default NewLeavesPage"],"names":["action","_x","_action","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref2","request","params","method","data","token","id","leaveData","leaveUpdateData","url","response","leaveId","_response","wrap","_context","prev","next","formData","sent","getAuthToken","leave_date","get","return_date","person_responsible","relationship","contact","reason","resident_id","fetch","headers","Authorization","body","JSON","stringify","status","abrupt","ok","json","message","redirect","concat","stop","_ref","leave","navigate","useNavigate","navigation","useNavigation","useActionData","isSubmitting","state","_jsxs","React","children","errors","_jsx","Object","values","map","err","Form","className","htmlFor","type","name","defaultValue","required","rows","onClick","disabled","NewLeaveForm"],"sourceRoot":""}