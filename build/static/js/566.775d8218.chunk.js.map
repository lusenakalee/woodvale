{"version":3,"file":"static/js/566.775d8218.chunk.js","mappings":"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","sources":["webpack://woodvale/./src/components/UIComps/Modal.module.css?4635","components/UIComps/ModalComp.js","pages/AttachmentPages/NewAttachmentPage.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"backdrop\":\"Modal_backdrop__b7dRO\",\"modal\":\"Modal_modal__wqjFJ\",\"slide-down\":\"Modal_slide-down__+S91a\"};","import React from \"react\";\r\nimport classes from \"./Modal.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nfunction Backdrop(props) {\r\n  return <div className={classes.backdrop}></div>;\r\n}\r\n\r\nfunction ModalOverlays(props) {\r\n  return (\r\n    <div className={classes.modal}>\r\n      <div className={classes.content}>{props.children}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst portalElement = document.getElementById(\"overlays\");\r\n\r\nfunction Modal(props) {\r\n  return (\r\n    <React.Fragment>\r\n      {ReactDOM.createPortal(<Backdrop />, portalElement)}\r\n      {ReactDOM.createPortal(\r\n        <ModalOverlays>{props.children}</ModalOverlays>,\r\n        portalElement\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n","import React, { useState } from \"react\";\r\nimport Modal from \"../../components/UIComps/ModalComp\";\r\nimport {\r\n  useNavigate,\r\n  useRouteLoaderData,\r\n} from \"react-router-dom\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\n\r\nfunction NewAttachmentPage() {\r\n  const { resident } = useRouteLoaderData(\"resident-detail\");\r\n  const navigate = useNavigate();\r\n\r\n  const [description, setDescription] = useState(\"\");\r\n  const [submitting, setIsSubmitting] = useState(false);\r\n  const [file, setFile] = useState(null);\r\n\r\n  const handleFileChange = (event) => {\r\n    setFile(event.target.files[0]);\r\n  };\r\n\r\n  const handleDescriptionChange = (event) => {\r\n    setDescription(event.target.value);\r\n  };\r\n\r\n  function cancelHandler() {\r\n    navigate(\"..\");\r\n  }\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const token = getAuthToken();\r\n    setIsSubmitting(false)\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"description\", description);\r\n\r\n    try {\r\n      const response = await fetch(`https://woodvale-test-2.onrender.com/resident/upload/${resident.id}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (response.ok) {\r\n        const confirmed = window.confirm(\"File uploaded successfully\");\r\n        if (confirmed) {\r\n          setIsSubmitting(true)\r\n          navigate(\"..\");\r\n        }\r\n      } else if (response.status === 400) {\r\n        const data = await response.json();\r\n        window.alert(data.message); // Show the error message from the backend\r\n      } else {\r\n        window.alert(\"Failed to upload\");\r\n      }\r\n    } catch (error) {\r\n      window.alert(\"Network error\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"formFileMultiple\" className=\"form-label\">\r\n            <h2 className=\"text-base font-semibold leading-7 text-gray-900\">\r\n              Resident attachment\r\n            </h2>\r\n          </label>\r\n          <input\r\n            name=\"file\"\r\n            className=\"form-control mt-1 text-sm leading-6 text-gray-600 \"\r\n            type=\"file\"\r\n            id=\"formFileMultiple\"\r\n            onChange={handleFileChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"description\"\r\n            placeholder=\"Description\"\r\n            required\r\n            onChange={handleDescriptionChange}\r\n          />\r\n          <br />\r\n          <div className=\"space-x-4\">\r\n            <button\r\n              className=\"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\r\n              type=\"submit\"\r\n              disabled={submitting}\r\n            >\r\n              {submitting? \"Submitting\" : \"Submit\"}\r\n            </button>\r\n            <button\r\n              onClick={cancelHandler}\r\n              type=\"button\"\r\n              className=\"text-sm font-semibold leading-6 text-gray-900\"\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default NewAttachmentPage;"],"names":["Backdrop","props","_jsx","className","classes","backdrop","ModalOverlays","modal","children","content","portalElement","document","getElementById","_jsxs","React","ReactDOM","resident","useRouteLoaderData","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","description","setDescription","_useState3","_useState4","submitting","setIsSubmitting","_useState5","_useState6","file","setFile","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","token","formData","response","data","wrap","_context","prev","next","preventDefault","getAuthToken","FormData","append","fetch","concat","id","method","headers","Authorization","body","sent","ok","window","confirm","status","json","alert","message","t0","stop","_x","apply","arguments","Modal","onSubmit","htmlFor","name","type","onChange","target","files","required","placeholder","value","disabled","onClick"],"sourceRoot":""}