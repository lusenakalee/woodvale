{"version":3,"file":"static/js/5722.942f57a7.chunk.js","mappings":"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","sources":["components/AttachmentComps/AttachmentList.js","pages/AttachmentPages/AllAttachmentsPage.js"],"sourcesContent":["import React from \"react\";\nimport { json, redirect, useSubmit } from \"react-router-dom\";\nimport { getAuthToken } from \"../../util/Auth\";\nimport { TableCell, TableRow } from \"@tremor/react\";\nimport { Link } from \"react-router-dom\";\n\nfunction AttachmentList({ attachments }) {\n  async function startDeleteHandler(resident_id, id) {\n    const proceed = window.confirm(\"Are you sure?\");\n    const token = getAuthToken();\n    if (proceed) {\n      const response = await fetch(\n        `/resident/upload/${resident_id}/${id}`,\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + token,\n          },\n        }\n      );\n      if (!response.ok) {\n        throw json(\n          { message: \"Could not delete attachment.\" },\n          {\n            status: 500,\n          }\n        );\n      }\n      return redirect(`/login/residents/${resident_id}/attachment`);\n    }\n  }\n  return (<React.Fragment>\n          {attachments.map((item) => (\n            <TableRow key={item.id}>\n              <Link to={`./${item.id}`}>\n                <TableCell>{item.description}</TableCell>\n              </Link>\n              <TableCell className=\"text-right\">\n                {item.upload_date}\n              </TableCell>\n              <TableCell className=\"text-right\">\n                <button onClick={() => startDeleteHandler(item.resident_id, item.id)}>Delete</button>\n              </TableCell>\n            </TableRow>\n          ))}\n  </React.Fragment>);\n}\n\nexport default AttachmentList;\n","import React from 'react'\nimport { json, useRouteLoaderData } from 'react-router-dom';\nimport { getAuthToken } from '../../util/Auth';\nimport AttachmentList from '../../components/AttachmentComps/AttachmentList';\n\nfunction AllAttachmentsPage() {\n    const attachments = useRouteLoaderData(\"attachments\")\n  return (\n    <AttachmentList attachments={attachments}/>\n  )\n}\n\nexport default AllAttachmentsPage\n\nexport async function loader({ request, params }) {\n    const id = params.id;\n    let url = \"https://woodvale-test-2.onrender.com/resident/upload/\" + id;\n    const token = getAuthToken();\n\n    const response = await fetch(url, {\n      method: \"get\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n    });\n    if (response.status === 404) {\n      return response;\n    }\n    if (response.status === 400) {\n        return response;\n      }\n    if (!response.ok) {\n      throw json({ message: \"Wrong Url\" }, { status: 500 });\n    }\n  \n    const resData = await response.json();\n    return resData;\n  }"],"names":["_ref","attachments","_startDeleteHandler","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resident_id","id","proceed","token","wrap","_context","prev","next","window","confirm","getAuthToken","fetch","concat","method","headers","Authorization","sent","ok","json","message","status","abrupt","redirect","stop","apply","arguments","_jsx","React","children","map","item","_jsxs","TableRow","Link","to","TableCell","description","className","upload_date","onClick","_x","_x2","startDeleteHandler","useRouteLoaderData","AttachmentList","loader","_loader","params","url","response","resData","request"],"sourceRoot":""}