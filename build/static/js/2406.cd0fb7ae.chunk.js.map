{"version":3,"file":"static/js/2406.cd0fb7ae.chunk.js","mappings":"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","sources":["components/UserComps/ShowUserProfile.js","pages/UserPages/ProfilePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useActionData } from \"react-router-dom\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\n\r\nfunction ShowUserProfile({ user }) {\r\n  const imgToken = getAuthToken();\r\n\r\n  const data = useActionData();\r\n\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchImage = async () => {\r\n      try {\r\n        const response = await fetch(`/upload/${user.id}`, {\r\n          headers: {\r\n            Authorization: \"Bearer \" + imgToken,\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const blob = await response.blob();\r\n          const url = URL.createObjectURL(blob);\r\n          setImageUrl(url);\r\n        } else {\r\n          console.error(\"Error fetching image:\", response.status);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching image:\", error);\r\n      }\r\n    };\r\n\r\n    fetchImage();\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data && data.errors && (\r\n        <ul>\r\n          {Object.values(data.errors).map((err) => (\r\n            <li key={err}>{err}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      <div className=\"flex gap-x-4\">\r\n        {imageUrl && (\r\n          <img\r\n            className=\"h-12 w-12 flex-none rounded-full bg-gray-50\"\r\n            src={imageUrl}\r\n            alt=\"Profile\"\r\n          />\r\n        )}\r\n        <div className=\"min-w-0 flex-auto\">\r\n          <p className=\"text-sm font-semibold leading-6 text-gray-900\">\r\n            {user.first_name}'s Information\r\n          </p>\r\n          <p className=\"mt-1 truncate text-xs leading-5 text-gray-500\">\r\n            {\" \"}\r\n            General details and Information.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"px-4 py-3 sm:grid sm:grid-cols-3 hover:bg-white sm:gap-4 sm:px-0\">\r\n        <dt className=\"text-sm font-medium leading-6 text-gray-900\">\r\n          Full name\r\n        </dt>\r\n        <dd className=\"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0\">\r\n          {user.first_name} {user.last_name}\r\n        </dd>\r\n      </div>\r\n      <div className=\"px-4 py-3 sm:grid sm:grid-cols-3 hover:bg-white sm:gap-4 sm:px-0\">\r\n        <dt className=\"text-sm font-medium leading-6 text-gray-900\">\r\n          Username\r\n        </dt>\r\n        <dd className=\"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0\">\r\n          {user.username}\r\n        </dd>\r\n      </div>\r\n      <div className=\"px-4 py-3 sm:grid sm:grid-cols-3 hover:bg-white sm:gap-4 sm:px-0\">\r\n        <dt className=\"text-sm font-medium leading-6 text-gray-900\">\r\n          User type\r\n        </dt>\r\n        <dd className=\"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0\">\r\n          {user.is_admin === true ? \"Admin\" : \"Care Giver\"}\r\n        </dd>\r\n      </div>\r\n\r\n      <div className=\" px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6\">\r\n        <dd>\r\n          <Link to={`./edit`}>\r\n            <button className=\"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\">\r\n              Edit\r\n            </button>\r\n          </Link>\r\n        </dd>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ShowUserProfile;\r\n","import React from \"react\";\r\nimport { json, useRouteLoaderData } from \"react-router-dom\";\r\nimport ShowUserProfile from \"../../components/UserComps/ShowUserProfile\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\n\r\nfunction ProfilePage() {\r\n  const user = useRouteLoaderData(\"profile\");\r\n  return (\r\n    <React.Fragment>\r\n      <main>\r\n        <div className=\"mx-auto max-w-7xl py-6 sm:px-6 lg:px-8\">\r\n      <ShowUserProfile user={user} />\r\n      </div>\r\n      </main>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ProfilePage;\r\n\r\nexport async function loader({ request }) {\r\n  let url = \"/current_user\";\r\n  const token = getAuthToken();\r\n  const response = await fetch(url, {\r\n    method: \"get\",  \r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n      \"Access-Control-Allow-Origin\": \"*\",\r\n    },\r\n  });\r\n  if (response.status === 400) {\r\n    return response;\r\n  }\r\n  if (response.status === 404) {\r\n    return response;\r\n  }\r\n  if (!response.ok) {\r\n    throw json({ message: \"Server Error\" }, { status: 500 });\r\n  }\r\n\r\n  const resData = await response.json();\r\n  console.log(resData)\r\n  return resData;\r\n}\r\n"],"names":["_ref","user","imgToken","getAuthToken","data","useActionData","_useState","useState","_useState2","_slicedToArray","imageUrl","setImageUrl","useEffect","fetchImage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","blob","url","wrap","_context","prev","next","fetch","concat","id","headers","Authorization","sent","ok","URL","createObjectURL","console","error","status","t0","stop","apply","arguments","_jsxs","React","children","errors","_jsx","Object","values","map","err","className","src","alt","first_name","last_name","username","is_admin","Link","to","useRouteLoaderData","ShowUserProfile","loader","_x","_loader","token","resData","request","method","abrupt","json","message","log"],"sourceRoot":""}