{"version":3,"file":"static/js/566.5a34f5f1.chunk.js","mappings":"uJACA,GAAgB,SAAW,wBAAwB,MAAQ,qBAAqB,aAAa,2B,mBCG7F,SAASA,EAASC,GAChB,OAAOC,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAQC,UACjC,CAEA,SAASC,EAAcL,GACrB,OACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAQG,MAAMC,UAC5BN,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAQK,QAAQD,SAAEP,EAAMO,YAG9C,CAEA,IAAME,EAAgBC,SAASC,eAAe,YAc9C,MAZA,SAAeX,GACb,OACEY,EAAAA,EAAAA,MAACC,EAAAA,SAAc,CAAAN,SAAA,CACZO,EAAAA,cAAsBb,EAAAA,EAAAA,KAACF,EAAQ,IAAKU,GACpCK,EAAAA,cACCb,EAAAA,EAAAA,KAACI,EAAa,CAAAE,SAAEP,EAAMO,WACtBE,KAIR,C,gHCsFA,UArGA,WACE,IAAQM,GAAaC,EAAAA,EAAAA,IAAmB,mBAAhCD,SACFE,GAAWC,EAAAA,EAAAA,MACXC,GAAaC,EAAAA,EAAAA,MACnBC,GAAsCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA3CI,EAAWF,EAAA,GAAEG,EAAcH,EAAA,GAC5BI,EAAoC,eAArBR,EAAWS,MAChCC,GAAwBP,EAAAA,EAAAA,UAAS,MAAKQ,GAAAN,EAAAA,EAAAA,GAAAK,EAAA,GAA/BE,EAAID,EAAA,GAAEE,EAAOF,EAAA,GAadG,EAAY,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOC,GAAK,IAAAC,EAAAC,EAAAC,EAAA,OAAAN,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAMa,OAL5CP,EAAMQ,iBACAP,GAAQQ,EAAAA,EAAAA,iBAERP,EAAW,IAAIQ,UACZC,OAAO,OAAQnB,GACxBU,EAASS,OAAO,cAAezB,GAAamB,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGnBK,MAAM,mDAADC,OAAoDrC,EAASsC,IAAM,CAC7FC,OAAQ,OACRC,QAAS,CACPC,cAAe,UAAYhB,GAE7BiB,KAAMhB,IACL,KAAD,EACsB,OAPlBC,EAAQE,EAAAc,MAODC,QACXC,OAAOC,MAAM,+CAEXnB,EAASoB,GACOF,OAAOG,QACvB,+BAGA9C,EAAS,MAGX2C,OAAOC,MAAM,oBACdjB,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAoB,GAAApB,EAAA,SAEDgB,OAAOC,MAAM,gBAAejB,EAAAoB,IAAS,yBAAApB,EAAAqB,OAAA,GAAA3B,EAAA,mBAExC,gBAhCiB4B,GAAA,OAAAhC,EAAAiC,MAAA,KAAAC,UAAA,KAkClB,OACEnE,EAAAA,EAAAA,KAACoE,EAAAA,EAAK,CAAA9D,UACJN,EAAAA,EAAAA,KAAA,QAAMqE,SAAUrC,EAAa1B,UAC3BK,EAAAA,EAAAA,MAAA,OAAKV,UAAU,OAAMK,SAAA,EACnBN,EAAAA,EAAAA,KAAA,SAAOsE,QAAQ,mBAAmBrE,UAAU,aAAYK,UACtDN,EAAAA,EAAAA,KAAA,MAAIC,UAAU,kDAAiDK,SAAC,2BAIlEN,EAAAA,EAAAA,KAAA,SACEuE,KAAK,OACLtE,UAAU,qDACVuE,KAAK,OACLpB,GAAG,mBACHqB,SA3De,SAACnC,GACxBP,EAAQO,EAAMoC,OAAOC,MAAM,GAC7B,EA0DUC,UAAQ,KAEV5E,EAAAA,EAAAA,KAAA,SACEwE,KAAK,OACLD,KAAK,cACLM,YAAY,cACZD,UAAQ,EACRE,MAAOtD,EACPiD,SAjEsB,SAACnC,GAC/Bb,EAAea,EAAMoC,OAAOI,MAC9B,KAiEQ9E,EAAAA,EAAAA,KAAA,UACAW,EAAAA,EAAAA,MAAA,OAAKV,UAAU,YAAWK,SAAA,EACxBN,EAAAA,EAAAA,KAAA,UACEC,UAAU,kNACVuE,KAAK,SACLO,SAAUrD,EAAapB,SAEtBoB,EAAe,aAAe,YAEjC1B,EAAAA,EAAAA,KAAA,UACEgF,QAzEZ,WACEhE,EAAS,KACX,EAwEYwD,KAAK,SACLvE,UAAU,gDAA+CK,SAC1D,oBAQb,C","sources":["webpack://woodvale/./src/components/UIComps/Modal.module.css?4635","components/UIComps/ModalComp.js","pages/AttachmentPages/NewAttachmentPage.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"backdrop\":\"Modal_backdrop__5zCZI\",\"modal\":\"Modal_modal__R70HS\",\"slide-down\":\"Modal_slide-down__uWUnH\"};","import React from \"react\";\nimport classes from \"./Modal.module.css\";\nimport ReactDOM from \"react-dom\";\n\nfunction Backdrop(props) {\n  return <div className={classes.backdrop}></div>;\n}\n\nfunction ModalOverlays(props) {\n  return (\n    <div className={classes.modal}>\n      <div className={classes.content}>{props.children}</div>\n    </div>\n  );\n}\n\nconst portalElement = document.getElementById(\"overlays\");\n\nfunction Modal(props) {\n  return (\n    <React.Fragment>\n      {ReactDOM.createPortal(<Backdrop />, portalElement)}\n      {ReactDOM.createPortal(\n        <ModalOverlays>{props.children}</ModalOverlays>,\n        portalElement\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default Modal;\n","import React, { useState } from \"react\";\nimport Modal from \"../../components/UIComps/ModalComp\";\nimport {\n  Form,\n  json,\n  redirect,\n  useActionData,\n  useNavigate,\n  useNavigation,\n  useRouteLoaderData,\n} from \"react-router-dom\";\nimport { getAuthToken } from \"../../util/Auth\";\n\nfunction NewAttachmentPage() {\n  const { resident } = useRouteLoaderData(\"resident-detail\");\n  const navigate = useNavigate();\n  const navigation = useNavigation();\n  const [description, setDescription] = useState(\"\");\n  const isSubmitting = navigation.state === \"submitting\";\n  const [file, setFile] = useState(null);\n\n  const handleFileChange = (event) => {\n    setFile(event.target.files[0]);\n  };\n  const handleDescriptionChange = (event) => {\n    setDescription(event.target.value);\n  };\n\n  function cancelHandler() {\n    navigate(\"..\");\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const token = getAuthToken();\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"description\", description);\n\n    try {\n      const response = await fetch(`https://homes-test.onrender.com/resident/upload/${resident.id}`, {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + token,\n        },\n        body: formData,\n      });\n      if (response.status === 400) {\n        window.alert(\"Only PDF or Image attachments are allowed!!\");\n      }\n      if (response.ok) {\n        const confirmed = window.confirm(\n          \"File uploaded successfully\"\n        );\n        if (confirmed) {\n          navigate(\"..\");\n        }\n      } else {\n        window.alert(\"failed to upload\");\n      }\n    } catch (error) {\n      window.alert(\"Network error\", error);\n    }\n  };\n\n  return (\n    <Modal>\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-3\">\n          <label htmlFor=\"formFileMultiple\" className=\"form-label\">\n            <h2 className=\"text-base font-semibold leading-7 text-gray-900\">\n              Resident attachment\n            </h2>\n          </label>\n          <input\n            name=\"file\"\n            className=\"form-control mt-1 text-sm leading-6 text-gray-600 \"\n            type=\"file\"\n            id=\"formFileMultiple\"\n            onChange={handleFileChange}\n            required\n          />\n          <input\n            type=\"text\"\n            name=\"description\"\n            placeholder=\"Description\"\n            required\n            value={description}\n            onChange={handleDescriptionChange}\n          />\n          <br />\n          <div className=\"space-x-4\">\n            <button\n              className=\"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n              type=\"submit\"\n              disabled={isSubmitting}\n            >\n              {isSubmitting ? \"Submitting\" : \"Submit\"}\n            </button>\n            <button\n              onClick={cancelHandler}\n              type=\"button\"\n              className=\"text-sm font-semibold leading-6 text-gray-900\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </form>\n    </Modal>\n  );\n}\n\nexport default NewAttachmentPage;\n"],"names":["Backdrop","props","_jsx","className","classes","backdrop","ModalOverlays","modal","children","content","portalElement","document","getElementById","_jsxs","React","ReactDOM","resident","useRouteLoaderData","navigate","useNavigate","navigation","useNavigation","_useState","useState","_useState2","_slicedToArray","description","setDescription","isSubmitting","state","_useState3","_useState4","file","setFile","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","token","formData","response","wrap","_context","prev","next","preventDefault","getAuthToken","FormData","append","fetch","concat","id","method","headers","Authorization","body","sent","status","window","alert","ok","confirm","t0","stop","_x","apply","arguments","Modal","onSubmit","htmlFor","name","type","onChange","target","files","required","placeholder","value","disabled","onClick"],"sourceRoot":""}