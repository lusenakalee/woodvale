{"version":3,"file":"static/js/4049.bbfdb5d6.chunk.js","mappings":"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","sources":["components/MedicalRecordsComs/MedRecordsForm.js"],"sourcesContent":["import React from \"react\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\nimport {\r\n  Form,\r\n  json,\r\n  redirect,\r\n  useActionData,\r\n  useNavigate,\r\n  useNavigation,\r\n} from \"react-router-dom\";\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nfunction MedicalRecordForm({ record, method, title }) {\r\n  const navigate = useNavigate();\r\n  const navigation = useNavigation();\r\n  const data = useActionData();\r\n  const isSubmitting = navigation.state === \"submitting\";\r\n  function cancelHandler() {\r\n    navigate(\"..\");\r\n  }\r\n\r\n  if (data && data.errors) {\r\n    Object.values(data.errors).forEach((err) => {\r\n      toast.error(err);\r\n    });\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data && data.errors && (\r\n        <ul>\r\n          {Object.values(data.errors).map((err) => (\r\n            <li key={err}>{err}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {data && data.message && <p>{data.message}</p>}\r\n      <Form method={method}>\r\n        <div className=\"col-span-full\">\r\n          <label\r\n            htmlFor=\"condition\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Condition\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <textarea\r\n              id=\"condition\"\r\n              required\r\n              name=\"condition\"\r\n              rows={3}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n              defaultValue={\"\"}\r\n            />\r\n          </div>\r\n          <p className=\"mt-3 text-sm leading-6 text-gray-600\">\r\n            Write about the resident's condition.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"col-span-full\">\r\n          <label\r\n            htmlFor=\"allergies\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            allergies\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <textarea\r\n              id=\"allergies\"\r\n              required\r\n              name=\"allergies\"\r\n              rows={3}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n              defaultValue={\"\"}\r\n            />\r\n          </div>\r\n          <p className=\"mt-3 text-sm leading-6 text-gray-600\">\r\n            Write about the resident's allergies.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"col-span-full\">\r\n          <label\r\n            htmlFor=\"medication\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            medication\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <textarea\r\n              id=\"medication\"\r\n              required\r\n              name=\"medication\"\r\n              rows={3}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n              defaultValue={\"\"}\r\n            />\r\n          </div>\r\n          <p className=\"mt-3 text-sm leading-6 text-gray-600\">\r\n            Write about the resident's medication.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"sm:col-span-3\">\r\n          <label\r\n            htmlFor=\"feeding_method\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Feeding method\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <select\r\n              id=\"feeding_method\"\r\n              name=\"feeding_method\"\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6\"\r\n            >\r\n              <option>Dependent</option>\r\n              <option>Independent</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-span-full\">\r\n          <label\r\n            htmlFor=\"immunization_records\"\r\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\r\n          >\r\n            Immunization records\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <textarea\r\n              id=\"immunization_records\"\r\n              required\r\n              name=\"immunization_records\"\r\n              rows={3}\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n              defaultValue={\"\"}\r\n            />\r\n          </div>\r\n          <p className=\"mt-3 text-sm leading-6 text-gray-600\">\r\n            Write about the resident's medication.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"sm:col-span-4 pt-10\">\r\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n            physician contact\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <input\r\n              id=\"physician_contact\"\r\n              name=\"physician_contact\"\r\n              autoComplete=\"physician_contact\"\r\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\" px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6\">\r\n          <div className=\"flex justify-between sm:col-span-4\">\r\n            <button\r\n              onClick={cancelHandler}\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              Back\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              {isSubmitting ? \"Submitting...\" : \"Save\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default MedicalRecordForm;\r\n\r\nexport async function action({ request, params }) {\r\n  const method = request.method;\r\n  const data = await request.formData();\r\n  const token = getAuthToken();\r\n  const id = params.id;\r\n  const recordData = {\r\n    condition: data.get(\"condition\"),\r\n    allergies: data.get(\"allergies\"),\r\n    medications: data.get(\"medication\"),\r\n    feeding_method: data.get(\"feeding_method\"),\r\n    immunization_records: data.get(\"immunization_records\"),\r\n    physician_contact: data.get(\"physician_contact\"),\r\n    resident_id: id,\r\n  };\r\n  const recordUpdateData = {\r\n    condition: data.get(\"condition\"),\r\n    allergies: data.get(\"allergies\"),\r\n    medications: data.get(\"medication\"),\r\n    feeding_method: data.get(\"feeding_method\"),\r\n    immunization_records: data.get(\"immunization_records\"),\r\n    physician_contact: data.get(\"physician_contact\"),\r\n  };\r\n  let url = \"https://homes-test.onrender.com/medical-records\";\r\n  if (method === \"POST\") {\r\n    const response = await fetch(url, {\r\n      method: method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      body: JSON.stringify(recordData),\r\n    });\r\n    if (response.status === 400) {\r\n      return response;\r\n    }\r\n    if (!response.ok) {\r\n      throw json(\r\n        { message: \"Failed to save the medical record.\" },\r\n        { status: 500 }\r\n      );\r\n    }\r\n    return redirect(`/login/residents/${id}/med-recs`);\r\n  }else{\r\n    url = `/medical-records/${id}`;\r\n    const response = await fetch(url, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      body: JSON.stringify(recordUpdateData),\r\n    });\r\n    if (response.status === 400) {\r\n      return response;\r\n    }\r\n    if (!response.ok) {\r\n      throw json(\r\n        { message: \"Failed to save the medical record.\" },\r\n        { status: 500 }\r\n      );\r\n    }\r\n    return redirect(`/login/residents/${id}/med-recs`);\r\n  }\r\n}\r\n"],"names":["action","_x","_action","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref2","request","params","method","data","token","id","recordData","recordUpdateData","url","response","_response","wrap","_context","prev","next","formData","sent","getAuthToken","condition","get","allergies","medications","feeding_method","immunization_records","physician_contact","resident_id","fetch","headers","Authorization","body","JSON","stringify","status","abrupt","ok","json","message","redirect","concat","stop","_ref","record","navigate","title","useNavigate","navigation","useNavigation","useActionData","isSubmitting","state","errors","Object","values","forEach","err","toast","error","_jsxs","React","children","_jsx","map","Form","className","htmlFor","required","name","rows","defaultValue","autoComplete","onClick","type","disabled"],"sourceRoot":""}