"use strict";(self.webpackChunkwoodvale=self.webpackChunkwoodvale||[]).push([[4862],{4862:function(e,t,r){r.r(t),r.d(t,{default:function(){return p},loader:function(){return w}});var n=r(4165),s=r(5861),a=r(2791),l=r(7689),i=r(2620),c=r(9439),o=r(1087),d=r(6418),u=r(9479),h=r(7929),x=r(1025),m=r.n(x),f=r(184);var j=function(e){var t=e.users,r=(0,a.useState)([]),n=(0,c.Z)(r,2),s=n[0],l=n[1],i=t.filter((function(e){return s.includes(e.first_name)||0===s.length})),x=(0,a.useState)(1),j=(0,c.Z)(x,2),g=j[0],p=j[1],w=i.length,v=Math.ceil(w/10),b=10*(g-1),y=b+10,N=i.slice(b,y);return(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)("div",{children:(0,f.jsxs)(h.kC,{className:"space-x-0.5",justifyContent:"start",alignItems:"center",children:[(0,f.jsx)(h.Dx,{children:"Staff"}),(0,f.jsx)(h.JO,{icon:d.Z,variant:"simple",tooltip:"Shows general staff information"}),(0,f.jsx)(h.Dx,{})]})}),(0,f.jsxs)("div",{className:"flex space-x-2",children:[(0,f.jsx)(h.NU,{className:"max-w-full sm:max-w-xs",onValueChange:l,placeholder:"Search by name...",children:t.map((function(e){return(0,f.jsx)(h.wn,{value:e.first_name,children:e.first_name},e.first_name)}))}),(0,f.jsxs)("button",{type:"button",onClick:function(){var e=m().unparse(i),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(t),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download","users.csv"),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},className:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:[(0,f.jsx)(u.Z,{className:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Export"]})]}),(0,f.jsxs)(h.iA,{className:"mt-6",children:[(0,f.jsx)(h.ss,{children:(0,f.jsxs)(h.SC,{children:[(0,f.jsx)(h.xs,{children:"First Name"}),(0,f.jsx)(h.xs,{className:"text-left",children:"Last Name"}),(0,f.jsx)(h.xs,{className:"text-left",children:"Username"}),(0,f.jsx)(h.xs,{className:"text-left",children:"User Type"})]})}),(0,f.jsx)(h.RM,{children:N.map((function(e){return(0,f.jsxs)(h.SC,{className:"hover:bg-white",children:[(0,f.jsx)(h.pj,{className:"w-auto hover:text-indigo-600 hover:underline",children:(0,f.jsx)(o.rU,{to:"./".concat(e.id),children:e.first_name})}),(0,f.jsx)(h.pj,{className:"text-left",children:e.last_name}),(0,f.jsx)(h.pj,{className:"text-left",children:e.username}),(0,f.jsx)(h.pj,{className:"text-left",children:!0===e.is_admin?"Admin":"User"})]},e.id)}))})]}),(0,f.jsxs)("ol",{className:"flex justify-center gap-1 text-xs font-medium mt-4",children:[g>1&&(0,f.jsx)("li",{children:(0,f.jsxs)("a",{href:"#",onClick:function(){return p((function(e){return e-1}))},className:"inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180",children:[(0,f.jsx)("span",{className:"sr-only",children:"Prev Page"}),(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,f.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]})}),Array.from({length:v},(function(e,t){return t+1})).map((function(e){return(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"#",onClick:function(){return p(e)},className:"".concat(e===g?"block h-8 w-8 rounded border-blue-600 bg-indigo-600 text-center leading-8 text-white":"block h-8 w-8 rounded border border-gray-100 bg-white text-center leading-8 text-gray-900"),children:e})},e)})),g<v&&(0,f.jsx)("li",{children:(0,f.jsxs)("a",{href:"#",onClick:function(){return p((function(e){return e+1}))},className:"inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180",children:[(0,f.jsx)("span",{className:"sr-only",children:"Next Page"}),(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,f.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})})]})]})},g=r(8127);var p=function(){var e=(0,l.V4)("users");return(0,f.jsx)(a.Fragment,{children:(0,f.jsx)(j,{users:e})})};function w(){return v.apply(this,arguments)}function v(){return(v=(0,s.Z)((0,n.Z)().mark((function e(){var t,r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,g.getAuthToken)(),e.next=3,fetch("https://woodvale-test-2.onrender.com/user",{method:"GET",headers:{Authorization:"Bearer "+t,"Access-Control-Allow-Origin":"*"}});case 3:if(400!==(r=e.sent).status){e.next=6;break}throw(0,i.AV)({message:"Only the admin can view users"},{status:400});case 6:if(r.ok){e.next=10;break}throw(0,i.AV)({message:"Cant get users"},{status:500});case 10:return e.next=12,r.json();case 12:return s=e.sent,e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=4862.f0600758.chunk.js.map