"use strict";(self.webpackChunkwoodvale=self.webpackChunkwoodvale||[]).push([[5722],{5722:function(t,e,n){n.r(e),n.d(e,{default:function(){return l},loader:function(){return f}});var r=n(4165),a=n(5861),s=n(2791),u=n(7689),c=n(2620),o=n(8127),i=n(7929),h=n(1087),d=n(184);var p=function(t){var e=t.attachments;function n(){return(n=(0,a.Z)((0,r.Z)().mark((function t(e,n){var a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=window.confirm("Are you sure?"),s=(0,o.getAuthToken)(),!a){t.next=9;break}return t.next=5,fetch("/resident/upload/".concat(e,"/").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}});case 5:if(t.sent.ok){t.next=8;break}throw(0,c.AV)({message:"Could not delete attachment."},{status:500});case 8:return t.abrupt("return",(0,c.uX)("/login/residents/".concat(e,"/attachment")));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,d.jsx)(s.Fragment,{children:e.map((function(t){return(0,d.jsxs)(i.SC,{children:[(0,d.jsx)(h.rU,{to:"./".concat(t.id),children:(0,d.jsx)(i.pj,{children:t.description})}),(0,d.jsx)(i.pj,{className:"text-right",children:t.upload_date}),(0,d.jsx)(i.pj,{className:"text-right",children:(0,d.jsx)("button",{onClick:function(){return function(t,e){return n.apply(this,arguments)}(t.resident_id,t.id)},children:"Delete"})})]},t.id)}))})};var l=function(){var t=(0,u.V4)("attachments");return(0,d.jsx)(p,{attachments:t})};function f(t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a,s,u,i,h;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.request,n=e.params,a=n.id,s="https://homes-test.onrender.com/resident/upload/"+a,u=(0,o.getAuthToken)(),t.next=6,fetch(s,{method:"get",headers:{Authorization:"Bearer "+u,"Access-Control-Allow-Origin":"*"}});case 6:if(404!==(i=t.sent).status){t.next=9;break}return t.abrupt("return",i);case 9:if(400!==i.status){t.next=11;break}return t.abrupt("return",i);case 11:if(i.ok){t.next=13;break}throw(0,c.AV)({message:"Wrong Url"},{status:500});case 13:return t.next=15,i.json();case 15:return h=t.sent,t.abrupt("return",h);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=5722.a2092b1b.chunk.js.map