{"version":3,"file":"static/js/8216.9406a00f.chunk.js","mappings":"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","sources":["components/IncidentComps/NewIncidentForm.js"],"sourcesContent":["import React from \"react\";\nimport { getAuthToken } from \"../../util/Auth\";\nimport {\n  Form,\n  json,\n  redirect,\n  useActionData,\n  useNavigate,\n  useNavigation,\n} from \"react-router-dom\";\n\nfunction NewIncidentForm({ method, incident }) {\n  const navigate = useNavigate();\n  const navigation = useNavigation();\n  const data = useActionData();\n  const isSubmitting = navigation.state === \"submitting\";\n  function cancelHandler() {\n    navigate(\"..\");\n  }\n\n  return (\n    <React.Fragment>\n      <Form method={method}>\n        <div className=\"sm:col-span-3\">\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n            Incident Date\n          </label>\n          <div className=\"mt-2\">\n            <input\n              id=\"incident_date\"\n              name=\"incident_date\"\n              type=\"date\"\n              defaultValue={incident ? incident.incident_date : \"\"}\n              required\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6\"\n            />\n          </div>\n        </div>\n\n        <div className=\"col-span-full\">\n          <label\n            htmlFor=\"about\"\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\n          >\n            Incident description\n          </label>\n          <div className=\"mt-2\">\n            <textarea\n              id=\"about\"\n              name=\"description\"\n              required\n              rows={3}\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              defaultValue={incident ? incident.description : \"\"}\n            />\n          </div>\n          <p className=\"mt-3 text-sm leading-6 text-gray-600\">\n            Write a few sentences about the Incident.\n          </p>\n        </div>\n\n        <div className=\"col-span-full\">\n          <label\n            htmlFor=\"actions_taken\"\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\n          >\n            Actions Taken\n          </label>\n          <div className=\"mt-2\">\n            <textarea\n              id=\"actions_taken\"\n              name=\"actions_taken\"\n              required\n              rows={3}\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              defaultValue={incident ? incident.actions_taken : \"\"}\n            />\n          </div>\n          <p className=\"mt-3 text-sm leading-6 text-gray-600\">\n            Write a few sentences about the Incident.\n          </p>\n        </div>\n\n        <div className=\"sm:col-span-3\">\n          <label\n            htmlFor=\"location\"\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\n          >\n            Location of Incident\n          </label>\n          <div className=\"mt-2\">\n            <input\n              type=\"text\"\n              name=\"location\"\n              defaultValue={incident ? incident.location : \"\"}\n              id=\"location\"\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n            />\n          </div>\n        </div>\n\n        <div className=\"sm:col-span-3\">\n          <label\n            htmlFor=\"person_reporting\"\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\n          >\n            Person reporting\n          </label>\n          <div className=\"mt-2\">\n            <input\n              required\n              type=\"text\"\n              name=\"person_reporting\"\n              defaultValue={incident ? incident.person_reporting : \"\"}\n              id=\"person_reporting\"\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n            />\n          </div>\n        </div>\n\n        <div className=\"sm:col-span-3\">\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n            Person notified\n          </label>\n          <div className=\"mt-2\">\n            <select\n              id=\"person_notified\"\n              defaultValue={incident ? incident.person_notified : \"\"}\n              name=\"person_notified\"\n              autoComplete=\"person_notified\"\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6\"\n            >\n              <option>911</option>\n              <option>Case Manager</option>\n              <option>MD</option>\n              <option>Family</option>\n            </select>\n          </div>\n        </div>\n\n        <div className=\"col-span-full\">\n          <label\n            htmlFor=\"witnesses\"\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\n          >\n            Witnesses\n          </label>\n          <div className=\"mt-2\">\n            <textarea\n              id=\"witnesses\"\n              name=\"witnesses\"\n              required\n              rows={3}\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              defaultValue={incident ? incident.witnesses : \"\"}\n            />\n          </div>\n        </div>\n\n        <div className=\"col-span-full\">\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n            Antecedent\n          </label>\n          <div className=\"mt-2\">\n            <textarea\n              id=\"antecedent\"\n              name=\"antecedent\"\n              rows={3}\n              className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              defaultValue={incident ? incident.antecedent : \"\"}\n            />\n          </div>\n        </div>\n\n        <div className=\"flex justify-between py-5 sm:col-span-4\">\n          <button\n            onClick={cancelHandler}\n            className=\"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            Back\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className=\"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            {isSubmitting ? \"Submitting...\" : \"Save\"}\n          </button>\n        </div>\n      </Form>\n    </React.Fragment>\n  );\n}\n\nexport default NewIncidentForm;\nexport async function action({ request, params }) {\n  const method = request.method;\n  const data = await request.formData();\n  const token = getAuthToken();\n  const id = params.id;\n  const incidentData = {\n    incident_date: data.get(\"incident_date\"),\n    description: data.get(\"description\"),\n    actions_taken: data.get(\"actions_taken\"),\n    location: data.get(\"location\"),\n    person_reporting: data.get(\"person_reporting\"),\n    person_notified: data.get(\"person_notified\"),\n    witnesses: data.get(\"witnesses\"),\n    antecedent: data.get(\"antecedent\"),\n    resident_id: id,\n  };\n  let url = \"https://homes-test.onrender.com/incident-reports\";\n  if (method === \"POST\") {\n    const response = await fetch(url, {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n      body: JSON.stringify(incidentData),\n    });\n    if (response.status === 400) {\n      return response;\n    }\n    if (!response.ok) {\n      throw json({ message: \"Failed to save the incident\" }, { status: 500 });\n    }\n    return redirect(`/login/residents/${id}/incident`);\n  }\n}\n"],"names":["action","_x","_action","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref2","request","params","method","data","token","id","incidentData","response","wrap","_context","prev","next","formData","sent","getAuthToken","incident_date","get","description","actions_taken","location","person_reporting","person_notified","witnesses","antecedent","resident_id","fetch","headers","Authorization","body","JSON","stringify","status","abrupt","ok","json","message","redirect","concat","stop","_ref","incident","navigate","useNavigate","navigation","useNavigation","isSubmitting","useActionData","state","_jsx","React","children","_jsxs","Form","className","name","type","defaultValue","required","htmlFor","rows","autoComplete","onClick","disabled"],"sourceRoot":""}