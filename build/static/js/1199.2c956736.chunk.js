"use strict";(self.webpackChunkwoodvale=self.webpackChunkwoodvale||[]).push([[1199,442],{442:function(e,t,s){s.r(t),s.d(t,{default:function(){return o},residentAction:function(){return g}});var a=s(4165),n=s(5861),r=s(2791),i=s(7689),l=s(1087),d=s(2620),m=s(8127),c=s(184);function o(e){var t=e.resident,s=e.title,a=e.method,n=(0,i.s0)(),d=(0,i.HJ)(),m=(0,i.nA)(),o="submitting"===d.state;return(0,c.jsxs)(r.Fragment,{children:[s,(0,c.jsx)(l.l0,{method:a,children:(0,c.jsxs)("div",{className:"space-y-12",children:[(0,c.jsxs)("div",{className:"border-b border-gray-900/10 pb-12",children:[(0,c.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Kindly fill in correct details"}),m&&m.errors&&(0,c.jsx)("ul",{children:Object.values(m.errors).map((function(e){return(0,c.jsx)("li",{children:e},e)}))}),m&&m.message&&(0,c.jsx)("p",{children:m.message}),(0,c.jsxs)("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-gray-900",children:"First name"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"first-name",id:"first-name",autoComplete:"given-name",defaultValue:t?t.first_name:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"middle-name",className:"block text-sm font-medium leading-6 text-gray-900",children:"Middle name"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"middle-name",id:"middle-name",autoComplete:"family-name",defaultValue:t?t.middle_name:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"last-name",className:"block text-sm font-medium leading-6 text-gray-900",children:"Last name"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"last-name",id:"last-name",defaultValue:t?t.last_name:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"gender",className:"block text-sm font-medium leading-6 text-gray-900",children:"Gender"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsxs)("select",{id:"gender",name:"gender",autoComplete:"gender-name",defaultValue:t?t.gender:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",children:[(0,c.jsx)("option",{children:"Male"}),(0,c.jsx)("option",{children:"Female"}),(0,c.jsx)("option",{children:"Other"})]})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium leading-6 text-gray-900",children:"Date Of Birth"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"date",name:"birthdate",id:"age",defaultValue:t?t.age:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-4",children:[(0,c.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",defaultValue:t?t.contact_email:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-4",children:[(0,c.jsx)("label",{htmlFor:"phone-no",className:"block text-sm font-medium leading-6 text-gray-900",children:"Phone Number"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{id:"phone-no",name:"phone-no",type:"number",autoComplete:"phone-no",defaultValue:t?t.contact_phone_no:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"col-span-full",children:[(0,c.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium leading-6 text-gray-900",children:"Street address"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"address",id:"address",autoComplete:"address",defaultValue:t?t.address:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-2 sm:col-start-1",children:[(0,c.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium leading-6 text-gray-900",children:"City"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"city",id:"city",autoComplete:"address-level2",defaultValue:t?t.city:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-2",children:[(0,c.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium leading-6 text-gray-900",children:"State / Province"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"state",id:"state",autoComplete:"address-level1",defaultValue:t?t.state:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-2",children:[(0,c.jsx)("label",{htmlFor:"zip",className:"block text-sm font-medium leading-6 text-gray-900",children:"ZIP / Postal code"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"zip",id:"zip",autoComplete:"zip",defaultValue:t?t.zip:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})]})]}),(0,c.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Kindly fill Next of Kin Details/ Emergency Contact"}),(0,c.jsxs)("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"contact",className:"block text-sm font-medium leading-6 text-gray-900",children:"Contact name"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"contact",id:"contact",required:!0,autoComplete:"given-name",defaultValue:t?t.emergency_contact_name:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-4",children:[(0,c.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-gray-900",children:"Contact Phone Number"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{id:"contact-number",name:"contact-number",type:"number",required:!0,autoComplete:"contact-number",defaultValue:t?t.emergency_contact_number:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"contact",className:"block text-sm font-medium leading-6 text-gray-900",children:"Other Emergency Contact Name"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"contact-2",id:"contact",autoComplete:"given-name",defaultValue:t?t.emergency_contact_name_2:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-4",children:[(0,c.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-gray-900",children:"Other Emergency Contact Number"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{id:"contact-number",name:"contact-number-2",type:"number",autoComplete:"contact-number",defaultValue:t?t.emergency_contact_number_2:" ",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"flex justify-between sm:col-span-4",children:[(0,c.jsx)("button",{onClick:function(){n("..")},className:"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Back"}),(0,c.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-900 bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:o?"Submitting...":"Save"})]})]})]})})]})}function g(e){return u.apply(this,arguments)}function u(){return(u=(0,n.Z)((0,a.Z)().mark((function e(t){var s,n,r,i,l,c,o,g,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.request,n=t.params,r=s.method,e.next=4,s.formData();case 4:if(i=e.sent,l=(0,m.getAuthToken)(),c={first_name:i.get("first-name"),last_name:i.get("last-name"),middle_name:i.get("middle-name"),date_of_birth:i.get("birthdate"),gender:i.get("gender"),emergency_contact_name:i.get("contact"),emergency_contact_number:i.get("contact-number"),emergency_contact_name_2:i.get("contact-2"),emergency_contact_number_2:i.get("contact-number-2"),address:i.get("address"),city:i.get("city"),state:i.get("state"),zip:i.get("zip"),contact_email:i.get("email"),contact_phone_no:i.get("phone-no")},o="https://woodvale-test-2.onrender.com/residents","POST"!==r){e.next=23;break}return e.next=11,fetch(o,{method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer "+l,"Access-Control-Allow-Origin":"*"},body:JSON.stringify(c)});case 11:if(404!==(g=e.sent).status){e.next=14;break}return e.abrupt("return",g);case 14:if(409!==g.status){e.next=16;break}return e.abrupt("return",g);case 16:if(500!==g.status){e.next=18;break}return e.abrupt("return",g);case 18:if(g.ok){e.next=20;break}throw(0,d.AV)({message:"Failed to save the resident"},{status:500});case 20:case 31:return e.abrupt("return",(0,d.uX)("/login/residents"));case 23:return u=n.id,o="/residents/"+u,e.next=27,fetch(o,{method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer "+l,"Access-Control-Allow-Origin":"*"},body:JSON.stringify(c)});case 27:if(e.sent.ok){e.next=31;break}throw window.alert("failed update"),(0,d.AV)({message:"Failed to update the resident"},{status:500});case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1199:function(e,t,s){s.r(t);var a=s(2791),n=s(442),r=s(184);t.default=function(){return(0,r.jsx)(a.Fragment,{children:(0,r.jsx)("main",{children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl py-6 sm:px-6 lg:px-8",children:(0,r.jsx)(n.default,{title:"New Resident Form",method:"post"})})})})}}}]);
//# sourceMappingURL=1199.2c956736.chunk.js.map